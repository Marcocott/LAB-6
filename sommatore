-- sommatore

LIBRARY ieee;
USE ieee.std_logic_1164.all;
USE ieee.numeric_std.all;

ENTITY sommatore IS
	PORT (X, Y: IN SIGNED (19 DOWNTO 0);
			S: OUT SIGNED (19 DOWNTO 0);
			SUB_ADDn :  IN STD_LOGIC);
END sommatore;

ARCHITECTURE Behavior OF sommatore IS

COMPONENT adder IS
	PORT (X, Y: IN SIGNED (19 DOWNTO 0);
			S: OUT SIGNED (19 DOWNTO 0);
		  Cin : IN SIGNED);
END COMPONENT;

SIGNAL out_exor,Cin : SIGNED (19 DOWNTO 0);
BEGIN
  Cin <= ("0000000000000000000" & SUB_ADDn);
  Gen_adder:
  FOR i IN 0 TO 19 GENERATE
		out_exor(i) <= Y(i) XOR SUB_ADDn;
	END GENERATE;
	
	add : adder PORT MAP (X => X, Y => out_exor, S => S, Cin => Cin);
	
END Behavior;
